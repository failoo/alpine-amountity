Alpine.directive("amountity",(o,{expression:s},{effect:e,evaluate:c,evaluateLater:t})=>{const a=t(s),n=(e(()=>{a((...e)=>{o.value=(e||0).toString().replace(/[^\d]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"٬")})}),c(s));function l(e){if("paste"==e.type){var t=((e.originalEvent||e).clipboardData||window.clipboardData).getData("text"),i=e.target.selectionStart,r=e.target.selectionEnd;const a=o.value;o.value=""+a.substring(0,i)+t+a.substring(r),o.setSelectionRange(i+t.length,i+t.length),e.preventDefault(),e.stopPropagation()}if("0"==o.value)c(s+" = 0");else{r=o.value;o.value||(o.value="0",o.setSelectionRange(0,1));let a="",n=e.target.selectionStart,l=e.target.selectionStart;o.value.split("").forEach(function(e,t){if(!/\d/.test(e))return n=n>t?Math.max(0,n-1):n,void(l=l>t?Math.max(0,l-1):l);a=""+a+e}),c(s+" = "+(a||0));i=a.length;o.value=a.replace(/\B(?=(\d{3})+(?!\d))/g,"٬"),r!=o.value&&(t=i%3,e=n<=t?n:n+Math.floor((n-1)/3),r=l<=t?l:l+Math.floor((l-1)/3),o.setSelectionRange(e,r))}}o.value=(n||0).toString().replace(/[^\d]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"٬"),o.addEventListener("keydown",function(e){var t=e.target.selectionStart,e=e.target.selectionStart,a=this.value.match(/^0+/);a&&(a=a[0].length,this.setSelectionRange(Math.max(0,t-a),Math.max(e+a)))}),o.addEventListener("keyup",l),o.addEventListener("paste",l),o.addEventListener("focus",function(e){""===o.value&&(o.value="0"),"0"===o.value&&o.setSelectionRange(0,1)})});